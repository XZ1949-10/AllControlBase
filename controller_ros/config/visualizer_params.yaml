# visualizer_params.yaml
# TurtleBot1 运行可视化配置
#
# 使用方法:
#   ros2 launch controller_ros visualizer.launch.py
#   ros2 launch controller_ros visualizer.launch.py config_file:=/path/to/custom.yaml

# =============================================================================
# 话题配置
# =============================================================================
topics:
  # 输入话题
  odom: "/odom"                           # 里程计
  trajectory: "/nn/local_trajectory"      # 网络输出轨迹
  cmd_unified: "/cmd_unified"             # 控制器输出命令
  diagnostics: "/controller/diagnostics"  # 控制器诊断
  camera_image: ""                        # 相机图像 (可选，留空使用俯视图)
  joy: "/joy"                             # 手柄输入
  
  # 输出话题
  # 注意: 手柄命令发布到 /joy_cmd_vel，由 cmd_vel_mux 或 cmd_vel_adapter 选择
  cmd_vel_output: "/joy_cmd_vel"          # 手柄控制输出 (不直接发到 /cmd_vel)
  control_mode: "/visualizer/control_mode"  # 控制模式 (true=手柄, false=网络)
  emergency_stop: "/controller/emergency_stop"  # 紧急停止

# =============================================================================
# 显示配置
# =============================================================================
display:
  update_rate: 30                         # GUI 刷新率 (Hz)
  velocity_history_sec: 10                # 速度历史显示时长 (秒)
  
  # 轨迹颜色 (RGB)
  trajectory_color: [0, 255, 0]           # 绿色
  robot_color: [255, 0, 0]                # 红色
  target_color: [255, 255, 0]             # 黄色

# =============================================================================
# 手柄配置 (Xbox 控制器)
# =============================================================================
joystick:
  # 按钮映射
  enable_button: 4                        # LB 键 - 使能手柄控制
  
  # 轴映射
  linear_axis: 1                          # 左摇杆 Y 轴 - 前进/后退
  angular_axis: 3                         # 右摇杆 X 轴 - 转向
  left_x_axis: 0                          # 左摇杆 X 轴
  left_y_axis: 1                          # 左摇杆 Y 轴
  right_x_axis: 3                         # 右摇杆 X 轴
  right_y_axis: 4                         # 右摇杆 Y 轴
  
  # 速度限制
  max_linear: 0.5                         # 最大线速度 (m/s)
  max_angular: 1.0                        # 最大角速度 (rad/s)
  
  # 死区
  deadzone: 0.1                           # 摇杆死区 (0-1)

# =============================================================================
# 速度约束 (用于显示)
# =============================================================================
constraints:
  v_max: 0.5                              # 最大线速度 (m/s)
  omega_max: 1.0                          # 最大角速度 (rad/s)

# =============================================================================
# 相机配置
# =============================================================================
camera:
  use_camera: false                       # 是否使用相机图像
  calibration_file: ""                    # 单应性标定文件路径 (留空则不使用相机投影)
                                          # 示例: "$(find controller_ros)/config/homography_calib.yaml"
  # 相机内参 (用于轨迹投影，如果使用相机)
  fx: 500.0                               # 焦距 x
  fy: 500.0                               # 焦距 y
  cx: 320.0                               # 主点 x
  cy: 240.0                               # 主点 y
