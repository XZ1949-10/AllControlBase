# tuned_turtlebot1.yaml
# è‡ªåŠ¨ç”Ÿæˆçš„ä¼˜åŒ–é…ç½®
# ç”Ÿæˆæ—¶é—´: 2025-12-31 09:35:35
# åŸºäº: d:\AllControlBase\controller_ros\config\turtlebot1.yaml
#
# æœ¬é…ç½®ç”±è¯Šæ–­è°ƒä¼˜å·¥å…·è‡ªåŠ¨ç”Ÿæˆ
# è¯·åœ¨éƒ¨ç½²å‰ä»”ç»†æ£€æŸ¥å„é¡¹å‚æ•°
#
# =============================================================================
# ä¼˜åŒ–æ‘˜è¦
# =============================================================================
# æ ·æœ¬æ•°: 500
# å¹³å°: differential
# æ§åˆ¶é¢‘ç‡: 20Hz
# MPC æˆåŠŸç‡: 89.0%
# MPC å¹³å‡æ±‚è§£æ—¶é—´: 12.9ms
# æ¨ªå‘è¯¯å·®(avg): 5.03cm
# çºµå‘è¯¯å·®(avg): 10.67cm
# æ­£å¸¸çŠ¶æ€å æ¯”: 98.4%
# å¤‡ç”¨æ§åˆ¶å™¨æ¿€æ´»ç‡: 0.0%
#
# åº”ç”¨çš„ä¼˜åŒ– (1é¡¹):
#   ğŸ”´ watchdog.traj_grace_ms: 600 â†’ 900
#
# è·³è¿‡çš„å»ºè®® (5é¡¹):
#   - watchdog.imu_timeout_ms: ç½®ä¿¡åº¦(0.50)ä½äºé˜ˆå€¼(0.6)
#   - transform.source_frame: å‚æ•°ç±»å‹(diagnostic)ä¸å…è®¸è‡ªåŠ¨è°ƒä¼˜
#   - transform.error_analysis: å‚æ•°ç±»å‹(diagnostic)ä¸å…è®¸è‡ªåŠ¨è°ƒä¼˜
#   - safety.emergency_decel: å‚æ•°ç±»å‹(safety)ä¸å…è®¸è‡ªåŠ¨è°ƒä¼˜
#   - safety.check: å‚æ•°ç±»å‹(safety)ä¸å…è®¸è‡ªåŠ¨è°ƒä¼˜
#

# =============================================================================
# ç³»ç»Ÿé…ç½®
# =============================================================================
system:
  ctrl_freq: 20
  platform: differential

# =============================================================================
# è¯é¢˜é…ç½®
# =============================================================================
topics:
  odom: /odom
  imu: ''
  trajectory: /nn/local_trajectory
  cmd_unified: /cmd_unified
  diagnostics: /controller/diagnostics
  state: /controller/state
  debug_path: /controller/debug_path

# =============================================================================
# è¶…æ—¶é…ç½®
# =============================================================================
watchdog:
  traj_grace_ms: 900

# =============================================================================
# è¯Šæ–­é…ç½®
# =============================================================================
diagnostics:
  publish_rate: 5

# =============================================================================
# MPC é…ç½®
# =============================================================================
mpc:
  horizon: 7
  horizon_degraded: 4
  weights:
    position: 15.0
    velocity: 6.0
    heading: 8.0
  health_monitor:
    time_warning_thresh_ms: 20
    time_critical_thresh_ms: 40
    time_recovery_thresh_ms: 15
    consecutive_warning_limit: 10

# =============================================================================
# é€Ÿåº¦çº¦æŸ
# =============================================================================
constraints:
  v_max: 0.5
  v_min: -0.2
  omega_max: 1.0
  omega_max_low: 0.5
  a_max: 0.5
  alpha_max: 1.5

# =============================================================================
# è½¨è¿¹é…ç½®
# =============================================================================
trajectory:
  low_speed_thresh: 0.05

# =============================================================================
# ä¸€è‡´æ€§æ£€æŸ¥é…ç½®
# =============================================================================
consistency:
  weights:
    kappa: 0.3
    velocity: 0.3
    temporal: 0.4

# =============================================================================
# è·Ÿè¸ªè´¨é‡è¯„ä¼°é…ç½®
# =============================================================================
tracking:
  lateral_thresh: 0.25
  longitudinal_thresh: 0.6

# =============================================================================
# å®‰å…¨é…ç½®
# =============================================================================
safety:
  emergency_decel: 1.0
  state_machine:
    mpc_recovery_tolerance: 1

# =============================================================================
# å¤‡ä»½æ§åˆ¶å™¨é…ç½®
# =============================================================================
backup:
  lookahead_dist: 0.5
  min_lookahead: 0.3
  max_lookahead: 1.5
  kp_heading: 2.0

# =============================================================================
# åæ ‡å˜æ¢é…ç½®
# =============================================================================
transform:
  source_frame: base_footprint
  timeout_ms: 50
  buffer_warmup_timeout_sec: 5.0
  buffer_warmup_interval_sec: 0.2

# =============================================================================
# cmd_vel é€‚é…å™¨é…ç½®
# =============================================================================
cmd_vel_adapter:
  publish_rate: 20.0
  cmd_timeout: 0.5                # å‘½ä»¤è¶…æ—¶ï¼Œé€‚ç”¨äºæ‰€æœ‰å‘½ä»¤æº
  enable_rate_limit: true         # ä»…æ‰‹æŸ„æ¨¡å¼ç”Ÿæ•ˆ
  joy_topic: /joy_cmd_vel
  mode_topic: /visualizer/control_mode
  output_topic: /mobile_base/commands/velocity