# ============================================================================
# 自动生成的优化配置
# 生成时间: 2025-12-29 13:24:49
# ============================================================================
#
# 检测结果:
#   里程计: 49.9 Hz, 延迟 0.3ms, 抖动 0.6ms
#   轨迹: 10.1 Hz, 8 点, dt=0.10000000149011612s
#   IMU: 0.0 Hz
#   包含速度信息: False
#
# 底盘特性:
#   最大速度: 0.00 m/s
#   最大角速度: 0.00 rad/s
#   最大加速度: 0.00 m/s^2
#
# ============================================================================

system:
  ctrl_freq: 20
  platform: differential
topics:
  odom: /odom
  imu: ''
  trajectory: /nn/local_trajectory
  emergency_stop: /controller/emergency_stop
  cmd_unified: /cmd_unified
  diagnostics: /controller/diagnostics
  state: /controller/state
tf:
  source_frame: base_footprint
  target_frame: odom
  timeout_ms: 50
  buffer_warmup_timeout_sec: 5.0
  buffer_warmup_interval_sec: 0.2
  expected_source_frames:
  - base_link
  - base_footprint
  - ''
watchdog:
  odom_timeout_ms: 60
  traj_timeout_ms: 197
  traj_grace_ms: 98
  imu_timeout_ms: -1
  startup_grace_ms: 5000
mpc:
  horizon: 7
  horizon_degraded: 3
  dt: 0.10000000149011612
  weights:
    position: 10.0
    velocity: 1.0
    heading: 5.0
    control_accel: 0.2
    control_alpha: 0.2
  solver:
    nlp_max_iter: 50
    qp_solver: PARTIAL_CONDENSING_HPIPM
    integrator_type: ERK
    nlp_solver_type: SQP_RTI
  health_monitor:
    time_warning_thresh_ms: 20
    time_critical_thresh_ms: 40
    time_recovery_thresh_ms: 15
    condition_number_thresh: 100000000.0
    condition_number_recovery: 100000.0
    kkt_residual_thresh: 0.001
    consecutive_warning_limit: 10
    consecutive_recovery_limit: 5
    recovery_multiplier: 2.0
    consecutive_good_for_decay: 2
    timeout_decay_rate: 2
  fallback:
    lookahead_steps: 3
    heading_kp: 1.5
    max_curvature: 5.0
    min_distance_thresh: 0.1
    min_turn_speed: 0.1
    default_speed_ratio: 0.5
constraints:
  v_max: 0.5
  v_min: -0.2
  omega_max: 1.0
  omega_max_low: 0.5
  a_max: 0.5
  alpha_max: 1.0
  v_low_thresh: 0.1
safety:
  v_stop_thresh: 0.05
  vz_stop_thresh: 0.1
  stopping_timeout: 5.0
  emergency_decel: 1.5
  low_speed:
    threshold: 0.1
    omega_limit: 0.5
  margins:
    velocity: 1.1
    acceleration: 1.5
  accel_filter_window: 3
  accel_filter_alpha: 0.3
  accel_filter_warmup_alpha: 0.5
  accel_filter_warmup_period: 3
  min_dt_for_accel: 0.001
  max_dt_for_accel: 1.0
  state_machine:
    alpha_disable_thresh: 0.0
    alpha_recovery_value: 0.0
    alpha_recovery_thresh: 5
    mpc_recovery_thresh: 5
    mpc_fail_window_size: 10
    mpc_fail_thresh: 3
    mpc_fail_ratio_thresh: 0.5
    mpc_recovery_history_min: 3
    mpc_recovery_recent_count: 5
    mpc_recovery_tolerance: 0
    mpc_recovery_success_ratio: 0.8
consistency:
  kappa_thresh: 0.5
  v_dir_thresh: 0.8
  temporal_smooth_thresh: 0.5
  alpha_min: 0.1
  max_curvature: 10.0
  temporal_window_size: 10
  weights:
    kappa: 0.3
    velocity: 0.3
    temporal: 0.4
ekf:
  use_odom_orientation_fallback: true
  imu_motion_compensation: false
  process_noise:
    position: !!python/object/apply:numpy.core.multiarray.scalar
    - &id001 !!python/object/apply:numpy.dtype
      args:
      - f8
      - false
      - true
      state: !!python/tuple
      - 3
      - <
      - null
      - null
      - null
      - -1
      - -1
      - 0
    - !!binary |
      AU2EDU+vhD8=
    velocity: !!python/object/apply:numpy.core.multiarray.scalar
    - *id001
    - !!binary |
      QmDl0CLbuT8=
    orientation: !!python/object/apply:numpy.core.multiarray.scalar
    - *id001
    - !!binary |
      Y+5aQj7oqT8=
    angular_velocity: 0.1
  measurement_noise:
    odom_position: !!python/object/apply:numpy.core.multiarray.scalar
    - *id001
    - !!binary |
      AU2EDU+vhD8=
    odom_velocity: !!python/object/apply:numpy.core.multiarray.scalar
    - *id001
    - !!binary |
      QmDl0CLbuT8=
transform:
  target_frame: odom
  source_frame: base_footprint
  timeout_ms: 50
  fallback_duration_limit_ms: 500
  fallback_critical_limit_ms: 1000
  drift_estimation_enabled: false
  recovery_correction_enabled: true
  drift_rate: 0.01
  drift_velocity_factor: 0.1
  max_drift_dt: 0.5
  drift_correction_thresh: 0.01
  expected_source_frames:
  - base_link
  - base_footprint
  - base_link_0
  - ''
  - odom
  warn_unexpected_frame: true
transition:
  type: exponential
  tau: 0.1
  max_duration: 0.5
  completion_threshold: 0.95
  duration: 0.2
backup:
  lookahead_dist: 0.5
  min_lookahead: 0.3
  max_lookahead: 1.5
  lookahead_ratio: 0.5
  kp_z: 1.0
  kp_heading: 1.5
  heading_mode: follow_velocity
  dt: 0.05
  heading_error_thresh: 1.047
  pure_pursuit_angle_thresh: 1.047
  heading_control_angle_thresh: 1.571
  max_curvature: 5.0
  min_turn_speed: 0.1
  default_speed_ratio: 0.5
  low_speed_transition_factor: 0.5
  curvature_speed_limit_thresh: 0.1
  min_distance_thresh: 0.1
  omega_rate_limit: null
tracking:
  lateral_thresh: 0.3
  longitudinal_thresh: 0.5
  heading_thresh: 0.5
  prediction_thresh: 0.5
  weights:
    lateral: 0.4
    longitudinal: 0.4
    heading: 0.2
  rating:
    excellent: 90
    good: 70
    fair: 50
cmd_vel_adapter:
  publish_rate: 20.0
  joy_timeout: 0.5
  max_linear: 0.5
  max_angular: 1.0
  max_linear_accel: 0.0
  max_angular_accel: 0.0
  input_topic: /cmd_unified
  joy_topic: /joy_cmd_vel
  mode_topic: /visualizer/control_mode
  output_topic: /cmd_vel
diagnostics:
  publish_rate: 10
