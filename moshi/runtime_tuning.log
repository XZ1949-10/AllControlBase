# 统一诊断日志 - 2025-12-29 13:40:41


[0;32m======================================================================
  统一诊断工具 v2.1 - 系统调优模式
======================================================================[0m

[0;34m阶段1: 话题监控 (300.0秒)[0m

  [0;32m[OK][0m 订阅 /odom
  [0;32m[OK][0m 订阅 /imu
  [0;32m[OK][0m 订阅 /nn/local_trajectory

  收集数据 300.0 秒...

[0;34m阶段3: 控制器运行时诊断 (300.0秒)[0m

  [0;32m[OK][0m 订阅 /controller/diagnostics

  收集控制器诊断 300.0 秒...
  [1;33m[INFO][0m 移动机器人以生成跟踪数据!
  [0;32m[OK][0m 收集 820 条诊断消息

[0;34m阶段4: 计算推荐配置[0m


[0;34m======================================================================
  诊断结果
======================================================================[0m

[0;36m传感器状态:[0m
  [0;32m[OK][0m odom: 49.9 Hz, 延迟: 0.5ms, 抖动: 1.4ms
  [0;31m[NO DATA][0m imu: 0.0 Hz, 延迟: 0.0ms, 抖动: 0.0ms
  [0;32m[OK][0m trajectory: 2.7 Hz, 延迟: 0.6ms, 抖动: 401.1ms

[0;36m轨迹特性:[0m
  点数: 8
  时间步长: 0.10000000149011612 sec
  包含速度: 否
  坐标系: base_footprint
  长度: 1.43 m
  最大曲率: 8.39 1/m

[0;36m底盘特性 (从里程计):[0m
  最大速度: 0.37 m/s
  最大vx: 0.37 m/s
  最大wz: 0.15 rad/s
  最大加速度: 1.03 m/s^2
  最大角加速度: 4.37 rad/s^2

[0;36m推荐参数:[0m
  控制频率: 20 Hz
  MPC horizon: 7
  MPC dt: 0.10000000149011612 sec
  v_max: 0.3 m/s
  omega_max: 0.12 rad/s
  a_max: 0.82 m/s^2
  Odom timeout: 60 ms
  Traj timeout: 746 ms
  Lookahead: 0.3 m

[0;36m优化建议:[0m
  [1;33m[WARN][0m 里程计频率较低，控制频率受限
  [1;33m[WARN][0m 轨迹无速度信息，alpha检查禁用

[0;36m控制器运行时统计:[0m
  MPC求解时间: 1.71ms avg, 16.58ms max
  MPC成功率: 100.0%
  备用控制器使用率: 0.0%
  横向误差: 8.5cm avg, 33.2cm max
  航向误差: 7.1° avg
  Alpha (一致性): 1.00 avg, 1.00 min

[0;35m运行时调优建议:[0m
  [0;32m[OK][0m MPC求解时间良好 (1.7ms < 15.0ms)
  [0;32m[OK][0m MPC成功率良好 (100%)
  [0;32m[OK][0m 横向跟踪误差可接受

[0;34m生成配置文件: /home/oamr/moshi/runtime_tuned_config.yaml[0m
  [0;32m[OK][0m 配置已保存到: /home/oamr/moshi/runtime_tuned_config.yaml

[0;36m使用方法:[0m
  roslaunch controller_ros controller.launch config:=$(pwd)//home/oamr/moshi/runtime_tuned_config.yaml
